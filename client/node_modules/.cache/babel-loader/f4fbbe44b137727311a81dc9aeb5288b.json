{"ast":null,"code":"import _classCallCheck from \"/Users/phb/Desktop/beaconave/edit-boundaries/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/phb/Desktop/beaconave/edit-boundaries/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/phb/Desktop/beaconave/edit-boundaries/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/phb/Desktop/beaconave/edit-boundaries/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/phb/Desktop/beaconave/edit-boundaries/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/phb/Desktop/beaconave/edit-boundaries/client/src/Map.js\";\nimport React, { Component } from 'react';\nvar map;\n\nvar Map =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Map, _Component);\n\n  function Map() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Map);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Map)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.setNewCoords = function () {\n      debugger;\n      var data = _this.state.setCoords;\n      var hood = _this.state.currentHood;\n      fetch('/data/set', {\n        method: 'POST',\n        body: [hood, JSON.stringify(data)],\n        headers: new Headers({\n          'Content-Type': 'application/json'\n        })\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Map, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      map = new window.google.maps.Map(document.querySelector('#map'), {\n        zoom: 14,\n        center: {\n          lat: 40.758745,\n          lng: -73.952642\n        }\n      });\n      fetch('/data').then(function (res) {\n        return res.json();\n      }).then(function (response) {\n        map.data.addGeoJson(response);\n      });\n      map.data.setStyle({\n        fillColor: 'green',\n        strokeWeight: 1,\n        clickable: true\n      });\n      var t = this;\n      map.data.addListener('click', function (event) {\n        t.setState({\n          currentPolygon: event,\n          currentHood: event.feature.getProperty('Name')\n        });\n        document.querySelector('.selection-name').textContent = event.feature.getProperty('Name'); // var shape = event.feature.getGeometry()\n\n        var shape = [];\n\n        for (var i = 0; i < event.feature.getGeometry().getLength(); i++) {\n          var shapeData = event.feature.getGeometry().getAt(i).getArray();\n          shape.push(shapeData);\n        }\n\n        var nowEditingShape = new window.google.maps.Polygon({\n          paths: shape,\n          strokeColor: '#FF0000',\n          strokeOpacity: 0.8,\n          strokeWeight: 1,\n          fillColor: '#FF0000',\n          fillOpacity: 0.35,\n          editable: true\n        });\n        nowEditingShape.setMap(map);\n        nowEditingShape.addListener('mouseup', function () {\n          var newShape = [];\n          this.getPaths().getArray()[0].forEach(function (coord) {\n            newShape.push(coord.lng(), coord.lat());\n          });\n          t.setState({\n            setCoords: newShape\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"map-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"selection-name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Pam\"), React.createElement(\"button\", {\n        onClick: this.handleButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Set New Coords\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"map\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Map;\n}(Component);\n\nexport default Map;","map":{"version":3,"sources":["/Users/phb/Desktop/beaconave/edit-boundaries/client/src/Map.js"],"names":["React","Component","map","Map","setNewCoords","data","state","setCoords","hood","currentHood","fetch","method","body","JSON","stringify","headers","Headers","window","google","maps","document","querySelector","zoom","center","lat","lng","then","res","json","response","addGeoJson","setStyle","fillColor","strokeWeight","clickable","t","addListener","event","setState","currentPolygon","feature","getProperty","textContent","shape","i","getGeometry","getLength","shapeData","getAt","getArray","push","nowEditingShape","Polygon","paths","strokeColor","strokeOpacity","fillOpacity","editable","setMap","newShape","getPaths","forEach","coord","handleButton"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nvar map;\n\nclass Map extends Component {\n\n  state: {\n    currentPolygon: '',\n    currentHood: '',\n    setCoords: ''\n  }\n\n  setNewCoords = () => {\n    debugger\n    var data = this.state.setCoords\n    var hood = this.state.currentHood\n    fetch('/data/set', {\n      method: 'POST',\n      body: [hood, JSON.stringify(data)],\n      headers: new Headers({\n        'Content-Type': 'application/json'\n      })\n    })\n  }\n\n  componentDidMount() {\n    map = new window.google.maps.Map(document.querySelector('#map'), {\n      zoom: 14,\n      center: {lat: 40.758745, lng: -73.952642 }\n    });\n\n    fetch('/data')\n    .then(res => res.json())\n    .then(function(response) {\n      map.data.addGeoJson(response);\n    })\n\n    map.data.setStyle({\n      fillColor: 'green',\n      strokeWeight: 1,\n      clickable: true\n    });\n\n    var t = this\n\n    map.data.addListener('click', function(event) {\n      t.setState({ currentPolygon: event, currentHood: event.feature.getProperty('Name')})\n      document.querySelector('.selection-name').textContent =\n      event.feature.getProperty('Name');\n      // var shape = event.feature.getGeometry()\n      var shape = [];\n      for (var i = 0; i < event.feature.getGeometry().getLength(); i++) {\n        var shapeData = event.feature.getGeometry().getAt(i).getArray();\n        shape.push(shapeData);\n      }\n      var nowEditingShape = new window.google.maps.Polygon({\n        paths: shape,\n        strokeColor: '#FF0000',\n        strokeOpacity: 0.8,\n        strokeWeight: 1,\n        fillColor: '#FF0000',\n        fillOpacity: 0.35,\n        editable: true\n      });\n\n      nowEditingShape.setMap(map);\n      nowEditingShape.addListener('mouseup', function() {\n        var newShape = []\n        this.getPaths().getArray()[0].forEach(coord => {newShape.push(coord.lng(), coord.lat())})\n        t.setState({ setCoords: newShape })\n      })\n    });\n  }\n  render() {\n    return (\n      <div className=\"map-wrapper\">\n        <div className=\"selection-name\">Pam</div>\n        <button onClick={this.handleButton}>Set New Coords</button>\n        <br></br>\n        <div id=\"map\">\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Map;\n"]},"metadata":{},"sourceType":"module"}